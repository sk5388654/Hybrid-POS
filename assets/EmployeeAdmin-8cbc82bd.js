import{d as R,H as I,i as T,l as q,r as x,c as E,p as B,o as a,a as n,b as e,t as r,f as C,E as b,w as i,v as g,z as h,F as c,e as f,n as V}from"./index-dc7c2917.js";const z={class:"space-y-6"},H={class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm"},O={class:"mb-3 text-lg font-semibold text-gray-800"},P={key:0,class:"mb-3 rounded-md bg-red-50 p-2 text-sm text-red-700"},$={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},j={class:"block text-sm text-gray-700"},G={key:0,class:"text-xs text-gray-500"},J=["value"],K=["value"],Q={class:"mt-4 flex gap-2"},W={class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm"},X={class:"mb-4 flex flex-wrap items-center gap-3"},Y={class:"text-lg font-semibold text-gray-800"},Z={class:"ml-auto flex flex-wrap gap-2"},ee=["value"],te=["value"],se={class:"overflow-x-auto"},oe={class:"w-full text-sm"},le={class:"divide-y divide-gray-200"},re={key:0,class:"text-center text-gray-500"},ae={class:"px-4 py-2 font-medium text-gray-900"},ne={class:"px-4 py-2 text-gray-700"},de={class:"px-4 py-2"},ie={class:"px-4 py-2"},ue={class:"px-4 py-2 text-right text-gray-700"},me={class:"px-4 py-2 text-right font-semibold text-gray-900"},pe={class:"px-4 py-2 text-center"},xe={class:"flex justify-center gap-2"},ge=["onClick"],ce=["onClick"],ve=R({__name:"EmployeeAdmin",setup(fe){const p=I(),N=T(),S=["Admin","Manager","Cashier"],A=["Active","Inactive"],o=q({fullName:"",role:"Cashier",username:"",password:"",hireDate:new Date().toISOString().split("T")[0],status:"Active"}),d=x(null),w=x(""),y=x("All"),v=x("All"),u=x(""),_=E(()=>{let l=p.employeesForCurrentStore;const s=w.value.trim().toLowerCase();return s&&(l=l.filter(t=>t.fullName.toLowerCase().includes(s)||t.username.toLowerCase().includes(s)||t.role.toLowerCase().includes(s))),y.value!=="All"&&(l=l.filter(t=>t.role===y.value)),v.value!=="All"&&(l=l.filter(t=>t.status===v.value)),l.sort((t,m)=>t.fullName.localeCompare(m.fullName))}),U=E(()=>{const l=N.sales,s=new Map;return l.forEach(t=>{if(t.cashier){const m=s.get(t.cashier)||{count:0,total:0};m.count+=1,m.total+=t.total,s.set(t.cashier,m)}}),s});function k(){o.fullName="",o.role="Cashier",o.username="",o.password="",o.hireDate=new Date().toISOString().split("T")[0],o.status="Active",d.value=null,u.value=""}function F(){if(!o.fullName.trim()||!o.username.trim()||!o.password.trim()&&!d.value){u.value="Please fill in all required fields";return}try{if(d.value==null)p.addEmployee({fullName:o.fullName.trim(),role:o.role,username:o.username.trim(),password:o.password,hireDate:o.hireDate,status:o.status});else{const l={fullName:o.fullName.trim(),role:o.role,username:o.username.trim(),hireDate:o.hireDate,status:o.status};o.password.trim()&&(l.password=o.password),p.updateEmployee(d.value,l)}k(),u.value=""}catch(l){u.value=l.message||"Failed to save employee"}}function M(l){d.value=l.id,o.fullName=l.fullName,o.role=l.role,o.username=l.username,o.password="",o.hireDate=l.hireDate,o.status=l.status,u.value=""}function L(l){confirm("Delete this employee?")&&(p.removeEmployee(l),d.value===l&&k())}function D(l){return U.value.get(l.username)||{count:0,total:0}}return B(()=>{p.load(),N.load()}),(l,s)=>(a(),n("div",z,[e("div",H,[e("h2",O,r(d.value==null?"Add Employee":"Edit Employee"),1),u.value?(a(),n("div",P,r(u.value),1)):C("",!0),e("div",$,[e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm text-gray-700"},[b("Full Name "),e("span",{class:"text-red-500"},"*")],-1)),i(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.fullName=t),type:"text",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[g,o.fullName]])]),e("div",null,[s[10]||(s[10]=e("label",{class:"block text-sm text-gray-700"},[b("Username "),e("span",{class:"text-red-500"},"*")],-1)),i(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.username=t),type:"text",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[g,o.username]])]),e("div",null,[e("label",j,[s[11]||(s[11]=b(" Password ",-1)),s[12]||(s[12]=e("span",{class:"text-red-500"},"*",-1)),d.value?(a(),n("span",G,"(leave blank to keep current)")):C("",!0)]),i(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.password=t),type:"password",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[g,o.password]])]),e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm text-gray-700"},[b("Role "),e("span",{class:"text-red-500"},"*")],-1)),i(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.role=t),class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},[(a(),n(c,null,f(S,t=>e("option",{key:t,value:t},r(t),9,J)),64))],512),[[h,o.role]])]),e("div",null,[s[14]||(s[14]=e("label",{class:"block text-sm text-gray-700"},"Hire Date",-1)),i(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.hireDate=t),type:"date",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[g,o.hireDate]])]),e("div",null,[s[15]||(s[15]=e("label",{class:"block text-sm text-gray-700"},"Status",-1)),i(e("select",{"onUpdate:modelValue":s[5]||(s[5]=t=>o.status=t),class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},[(a(),n(c,null,f(A,t=>e("option",{key:t,value:t},r(t),9,K)),64))],512),[[h,o.status]])])]),e("div",Q,[e("button",{onClick:F,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700"},r(d.value==null?"Add Employee":"Save Changes"),1),e("button",{onClick:k,class:"rounded-md border border-gray-300 px-4 py-2 text-sm"},"Clear")])]),e("div",W,[e("div",X,[e("h2",Y,"Employees ("+r(_.value.length)+")",1),e("div",Z,[i(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>w.value=t),type:"text",placeholder:"Search...",class:"w-48 rounded-md border border-gray-300 px-3 py-1 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[g,w.value]]),i(e("select",{"onUpdate:modelValue":s[7]||(s[7]=t=>y.value=t),class:"rounded-md border border-gray-300 px-3 py-1 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},[s[16]||(s[16]=e("option",{value:"All"},"All Roles",-1)),(a(),n(c,null,f(S,t=>e("option",{key:t,value:t},r(t),9,ee)),64))],512),[[h,y.value]]),i(e("select",{"onUpdate:modelValue":s[8]||(s[8]=t=>v.value=t),class:"rounded-md border border-gray-300 px-3 py-1 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},[s[17]||(s[17]=e("option",{value:"All"},"All Status",-1)),(a(),n(c,null,f(A,t=>e("option",{key:t,value:t},r(t),9,te)),64))],512),[[h,v.value]])])]),e("div",se,[e("table",oe,[s[19]||(s[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Username"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Role"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Status"),e("th",{class:"px-4 py-2 text-right text-xs font-medium text-gray-700"},"Sales"),e("th",{class:"px-4 py-2 text-right text-xs font-medium text-gray-700"},"Revenue"),e("th",{class:"px-4 py-2 text-center text-xs font-medium text-gray-700"},"Actions")])],-1)),e("tbody",le,[_.value.length===0?(a(),n("tr",re,[...s[18]||(s[18]=[e("td",{colspan:"7",class:"px-4 py-8"},"No employees found",-1)])])):C("",!0),(a(!0),n(c,null,f(_.value,t=>(a(),n("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",ae,r(t.fullName),1),e("td",ne,r(t.username),1),e("td",de,[e("span",{class:V(["inline-flex rounded-full px-2 py-1 text-xs font-medium",{"bg-purple-100 text-purple-800":t.role==="Admin","bg-blue-100 text-blue-800":t.role==="Manager","bg-green-100 text-green-800":t.role==="Cashier"}])},r(t.role),3)]),e("td",ie,[e("span",{class:V(["inline-flex rounded-full px-2 py-1 text-xs font-medium",t.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},r(t.status),3)]),e("td",ue,r(D(t).count),1),e("td",me," â‚¹"+r(D(t).total.toFixed(2)),1),e("td",pe,[e("div",xe,[e("button",{onClick:m=>M(t),class:"rounded-md border border-gray-300 px-2 py-1 text-xs hover:bg-gray-50"}," Edit ",8,ge),e("button",{onClick:m=>L(t.id),class:"rounded-md border border-red-300 bg-red-50 px-2 py-1 text-xs text-red-700 hover:bg-red-100"}," Delete ",8,ce)])])]))),128))])])])])]))}});export{ve as default};
