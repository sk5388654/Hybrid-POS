import{d as U,C as F,D as M,p as L,l as N,r as c,c as I,o as i,a as u,b as e,t as n,E as v,w as r,v as p,z as S,F as h,e as T,f as D,n as O}from"./index-dc7c2917.js";const q={class:"space-y-6"},z={class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm"},R={class:"mb-3 text-lg font-semibold text-gray-800"},$={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},j=["value"],H={class:"sm:col-span-2"},P={class:"mt-4 flex gap-2"},G={class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm"},J={class:"mb-4 flex flex-wrap items-center gap-3"},K={class:"ml-auto flex flex-wrap gap-2"},Q=["value"],W={class:"overflow-x-auto"},X={class:"w-full text-sm"},Y={class:"divide-y divide-gray-200"},Z={key:0,class:"text-center text-gray-500"},ee={class:"px-4 py-2 text-gray-700"},te={class:"px-4 py-2 font-medium text-gray-900"},oe={class:"px-4 py-2"},se={class:"px-4 py-2 text-right font-semibold text-red-600"},le={class:"px-4 py-2 text-gray-600"},ne={class:"px-4 py-2 text-center"},re={class:"flex justify-center gap-2"},de=["onClick"],ae=["onClick"],ie={key:0,class:"bg-gray-50"},ue={class:"px-4 py-2 text-right font-bold text-red-600"},ge=U({__name:"ExpenseAdmin",setup(pe){var k;const x=F(),C=M();L(()=>{x.load()});const _=["Rent","Supplies","Utilities","Salary","Misc"],s=N({expenseTitle:"",expenseCategory:"Misc",amount:0,date:new Date().toISOString().split("T")[0],notes:"",addedBy:((k=C.user)==null?void 0:k.username)||""}),a=c(null),f=c(""),g=c("All"),m=c(""),y=c(""),b=I(()=>{let l=x.expensesForCurrentStore;const o=f.value.trim().toLowerCase();return o&&(l=l.filter(t=>{var d;return t.expenseTitle.toLowerCase().includes(o)||((d=t.notes)==null?void 0:d.toLowerCase().includes(o))||t.addedBy.toLowerCase().includes(o)})),g.value!=="All"&&(l=l.filter(t=>t.expenseCategory===g.value)),m.value&&(l=l.filter(t=>t.date>=m.value)),y.value&&(l=l.filter(t=>t.date<=y.value)),l.sort((t,d)=>new Date(d.date).getTime()-new Date(t.date).getTime())});function w(){var l;s.expenseTitle="",s.expenseCategory="Misc",s.amount=0,s.date=new Date().toISOString().split("T")[0],s.notes="",s.addedBy=((l=C.user)==null?void 0:l.username)||"",a.value=null}function A(){var l;if(!s.expenseTitle.trim()||s.amount<=0){alert("Please fill in title and amount (must be > 0)");return}a.value==null?x.add({...s,addedBy:((l=C.user)==null?void 0:l.username)||"admin"}):x.update(a.value,{expenseTitle:s.expenseTitle,expenseCategory:s.expenseCategory,amount:s.amount,date:s.date,notes:s.notes}),w()}function B(l){a.value=l.id,s.expenseTitle=l.expenseTitle,s.expenseCategory=l.expenseCategory,s.amount=l.amount,s.date=l.date,s.notes=l.notes||"",s.addedBy=l.addedBy}function E(l){confirm("Delete this expense?")&&(x.remove(l),a.value===l&&w())}function V(){f.value="",g.value="All",m.value="",y.value=""}return(l,o)=>(i(),u("div",q,[e("div",z,[e("h2",R,n(a.value==null?"Add Expense":"Edit Expense"),1),e("div",$,[e("div",null,[o[9]||(o[9]=e("label",{class:"block text-sm text-gray-700"},[v("Expense Title "),e("span",{class:"text-red-500"},"*")],-1)),r(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>s.expenseTitle=t),type:"text",placeholder:"e.g. Electricity Bill",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[p,s.expenseTitle]])]),e("div",null,[o[10]||(o[10]=e("label",{class:"block text-sm text-gray-700"},[v("Category "),e("span",{class:"text-red-500"},"*")],-1)),r(e("select",{"onUpdate:modelValue":o[1]||(o[1]=t=>s.expenseCategory=t),class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},[(i(),u(h,null,T(_,t=>e("option",{key:t,value:t},n(t),9,j)),64))],512),[[S,s.expenseCategory]])]),e("div",null,[o[11]||(o[11]=e("label",{class:"block text-sm text-gray-700"},[v("Amount "),e("span",{class:"text-red-500"},"*")],-1)),r(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>s.amount=t),type:"number",min:"0.01",step:"0.01",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[p,s.amount,void 0,{number:!0}]])]),e("div",null,[o[12]||(o[12]=e("label",{class:"block text-sm text-gray-700"},[v("Date "),e("span",{class:"text-red-500"},"*")],-1)),r(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>s.date=t),type:"date",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[p,s.date]])]),e("div",H,[o[13]||(o[13]=e("label",{class:"block text-sm text-gray-700"},"Notes (Optional)",-1)),r(e("textarea",{"onUpdate:modelValue":o[4]||(o[4]=t=>s.notes=t),rows:"2",placeholder:"Additional details...",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[p,s.notes]])])]),e("div",P,[e("button",{onClick:A,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700"},n(a.value==null?"Add Expense":"Save Changes"),1),e("button",{onClick:w,class:"rounded-md border border-gray-300 px-4 py-2 text-sm"},"Clear")])]),e("div",G,[e("div",J,[o[15]||(o[15]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Expense History",-1)),e("div",K,[r(e("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>f.value=t),type:"text",placeholder:"Search...",class:"w-48 rounded-md border border-gray-300 px-3 py-1 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[p,f.value]]),r(e("select",{"onUpdate:modelValue":o[6]||(o[6]=t=>g.value=t),class:"rounded-md border border-gray-300 px-3 py-1 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},[o[14]||(o[14]=e("option",{value:"All"},"All Categories",-1)),(i(),u(h,null,T(_,t=>e("option",{key:t,value:t},n(t),9,Q)),64))],512),[[S,g.value]]),r(e("input",{"onUpdate:modelValue":o[7]||(o[7]=t=>m.value=t),type:"date",placeholder:"From",class:"rounded-md border border-gray-300 px-3 py-1 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[p,m.value]]),r(e("input",{"onUpdate:modelValue":o[8]||(o[8]=t=>y.value=t),type:"date",placeholder:"To",class:"rounded-md border border-gray-300 px-3 py-1 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[p,y.value]]),e("button",{onClick:V,class:"rounded-md border border-gray-300 px-3 py-1 text-sm hover:bg-gray-50"}," Clear Filters ")])]),e("div",W,[e("table",X,[o[19]||(o[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Date"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Title"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Category"),e("th",{class:"px-4 py-2 text-right text-xs font-medium text-gray-700"},"Amount"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Added By"),e("th",{class:"px-4 py-2 text-center text-xs font-medium text-gray-700"},"Actions")])],-1)),e("tbody",Y,[b.value.length===0?(i(),u("tr",Z,[...o[16]||(o[16]=[e("td",{colspan:"6",class:"px-4 py-8"},"No expenses found",-1)])])):D("",!0),(i(!0),u(h,null,T(b.value,t=>(i(),u("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",ee,n(new Date(t.date).toLocaleDateString()),1),e("td",te,n(t.expenseTitle),1),e("td",oe,[e("span",{class:O(["inline-flex rounded-full px-2 py-1 text-xs font-medium",{"bg-blue-100 text-blue-800":t.expenseCategory==="Rent","bg-green-100 text-green-800":t.expenseCategory==="Supplies","bg-yellow-100 text-yellow-800":t.expenseCategory==="Utilities","bg-purple-100 text-purple-800":t.expenseCategory==="Salary","bg-gray-100 text-gray-800":t.expenseCategory==="Misc"}])},n(t.expenseCategory),3)]),e("td",se,"₹"+n(t.amount.toFixed(2)),1),e("td",le,n(t.addedBy),1),e("td",ne,[e("div",re,[e("button",{onClick:d=>B(t),class:"rounded-md border border-gray-300 px-2 py-1 text-xs hover:bg-gray-50"}," Edit ",8,de),e("button",{onClick:d=>E(t.id),class:"rounded-md border border-red-300 bg-red-50 px-2 py-1 text-xs text-red-700 hover:bg-red-100"}," Delete ",8,ae)])])]))),128))]),b.value.length>0?(i(),u("tfoot",ie,[e("tr",null,[o[17]||(o[17]=e("td",{colspan:"3",class:"px-4 py-2 text-right font-semibold text-gray-700"},"Total:",-1)),e("td",ue," ₹"+n(b.value.reduce((t,d)=>t+d.amount,0).toFixed(2)),1),o[18]||(o[18]=e("td",{colspan:"2"},null,-1))])])):D("",!0)])])])]))}});export{ge as default};
