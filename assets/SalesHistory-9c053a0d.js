import{d as D,i as _,r as v,p as f,o as a,a as u,b as s,y,F as p,e as x,B as g,f as h,t as c}from"./index-0d35fcb3.js";import{_ as N}from"./InvoiceModal.vue_vue_type_script_setup_true_lang-25bd1843.js";import"./BarcodeDisplay.vue_vue_type_script_setup_true_lang-94ba3dee.js";import"./_plugin-vue_export-helper-c27b6911.js";const T={class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm"},k={key:0,class:"text-sm text-gray-500"},S={key:1,class:"divide-y divide-gray-100"},V={class:"font-medium text-gray-900"},w={class:"text-gray-600"},M=["onClick"],F=D({__name:"SalesHistory",setup(B){const l=_(),e=v(null),r=v(!1);f(()=>{l.load()});function b(o){const i=o.items.map(n=>{const d=n.unitPrice*n.quantity;return{name:n.name,quantity:n.quantity,unitPrice:n.unitPrice,lineDiscount:0,lineTotal:d}}),t=i.reduce((n,d)=>n+d.lineTotal,0),m=Math.max(0,t-o.total);e.value={invoiceNumber:o.invoiceNumber,datetime:o.datetime,items:i,subtotal:t,productDiscountTotal:0,invoiceDiscountMode:"flat",invoiceDiscountValue:m,invoiceDiscountAmount:m,total:o.total,paymentType:o.paymentType,cashier:o.cashier,customerName:o.customerName},r.value=!0}return(o,i)=>(a(),u(p,null,[s("div",T,[i[1]||(i[1]=s("h2",{class:"mb-3 text-lg font-semibold text-gray-800"},"Sales History",-1)),y(l).sales.length===0?(a(),u("div",k,"No invoices yet.")):(a(),u("ul",S,[(a(!0),u(p,null,x(y(l).sales,t=>(a(),u("li",{key:t.id,class:"flex items-center justify-between py-2 text-sm"},[s("div",null,[s("div",V,"#"+c(t.invoiceNumber),1),s("div",w,c(new Date(t.datetime).toLocaleString())+" • ₹"+c(t.total.toFixed(2))+" • "+c(t.paymentType),1)]),s("button",{class:"rounded-md border border-gray-300 px-3 py-1 text-xs",onClick:m=>b(t)},"View/Print",8,M)]))),128))]))]),r.value&&e.value?(a(),g(N,{key:0,invoiceNumber:e.value.invoiceNumber,datetime:e.value.datetime,items:e.value.items,subtotal:e.value.subtotal,productDiscountTotal:e.value.productDiscountTotal,invoiceDiscountMode:e.value.invoiceDiscountMode,invoiceDiscountValue:e.value.invoiceDiscountValue,invoiceDiscountAmount:e.value.invoiceDiscountAmount,total:e.value.total,paymentType:e.value.paymentType,cashier:e.value.cashier,customerName:e.value.customerName,onClose:i[0]||(i[0]=t=>r.value=!1)},null,8,["invoiceNumber","datetime","items","subtotal","productDiscountTotal","invoiceDiscountMode","invoiceDiscountValue","invoiceDiscountAmount","total","paymentType","cashier","customerName"])):h("",!0)],64))}});export{F as default};
