import{d as F,G as A,h as j,l as q,r as v,c as E,o as p,a as m,b as e,w as c,z as L,F as T,e as V,y as U,v as f,t as u,f as k,E as _,p as M,A as z,x as O}from"./index-dc7c2917.js";const B={class:"space-y-4"},R={class:"grid grid-cols-3 gap-4"},Q=["value"],G={key:0,class:"rounded-lg border border-gray-200 p-4"},H={class:"w-full text-sm"},J={class:"divide-y"},K={class:"px-2 py-1"},W={class:"px-2 py-1 text-right"},X={class:"px-2 py-1 text-right"},Y={class:"px-2 py-1 text-right"},Z={class:"px-2 py-1 text-center"},ee=["onClick"],te={class:"border-t"},se={class:"px-2 py-1 text-right font-semibold"},oe={class:"flex justify-end gap-2"},re=F({__name:"PurchaseOrderForm",props:{supplierId:{}},emits:["close","saved"],setup($,{emit:P}){const C=$,w=P,s=A(),a=j(),i=q([]),x=v(null),b=v(1),g=v(0),l=v(new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]),y=E(()=>i.reduce((h,r)=>h+r.total,0));function S(){if(!x.value||b.value<=0||g.value<=0)return;const h=a.products.find(r=>r.id===x.value);h&&(i.push({productId:h.id,productName:h.name,quantity:b.value,unitPrice:g.value,total:b.value*g.value}),x.value=null,b.value=1,g.value=0)}function I(h){i.splice(h,1)}function D(){if(i.length===0){alert("Please add at least one item");return}s.createPO({supplierId:C.supplierId,items:[...i],totalAmount:y.value,status:"Pending",dueDate:l.value}),i.splice(0,i.length),w("saved"),w("close")}return(h,r)=>(p(),m("div",B,[e("div",R,[e("div",null,[r[6]||(r[6]=e("label",{class:"block text-sm text-gray-700"},"Product",-1)),c(e("select",{"onUpdate:modelValue":r[0]||(r[0]=d=>x.value=d),class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},[r[5]||(r[5]=e("option",{value:null},"Select Product",-1)),(p(!0),m(T,null,V(U(a).products,d=>(p(),m("option",{key:d.id,value:d.id},u(d.name),9,Q))),128))],512),[[L,x.value]])]),e("div",null,[r[7]||(r[7]=e("label",{class:"block text-sm text-gray-700"},"Quantity",-1)),c(e("input",{"onUpdate:modelValue":r[1]||(r[1]=d=>b.value=d),type:"number",min:"1",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,b.value,void 0,{number:!0}]])]),e("div",null,[r[8]||(r[8]=e("label",{class:"block text-sm text-gray-700"},"Unit Price",-1)),c(e("input",{"onUpdate:modelValue":r[2]||(r[2]=d=>g.value=d),type:"number",min:"0",step:"0.01",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,g.value,void 0,{number:!0}]])])]),e("button",{onClick:S,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700"}," Add Item "),i.length>0?(p(),m("div",G,[r[12]||(r[12]=e("h4",{class:"mb-2 font-medium"},"Items",-1)),e("table",H,[r[11]||(r[11]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-2 py-1 text-left text-xs"},"Product"),e("th",{class:"px-2 py-1 text-right text-xs"},"Qty"),e("th",{class:"px-2 py-1 text-right text-xs"},"Price"),e("th",{class:"px-2 py-1 text-right text-xs"},"Total"),e("th",{class:"px-2 py-1 text-center text-xs"},"Action")])],-1)),e("tbody",J,[(p(!0),m(T,null,V(i,(d,n)=>(p(),m("tr",{key:n},[e("td",K,u(d.productName),1),e("td",W,u(d.quantity),1),e("td",X,"₹"+u(d.unitPrice.toFixed(2)),1),e("td",Y,"₹"+u(d.total.toFixed(2)),1),e("td",Z,[e("button",{onClick:t=>I(n),class:"text-red-600 hover:text-red-800"},"Remove",8,ee)])]))),128))]),e("tfoot",null,[e("tr",te,[r[9]||(r[9]=e("td",{colspan:"3",class:"px-2 py-1 text-right font-semibold"},"Total:",-1)),e("td",se,"₹"+u(y.value.toFixed(2)),1),r[10]||(r[10]=e("td",null,null,-1))])])])])):k("",!0),e("div",null,[r[13]||(r[13]=e("label",{class:"block text-sm text-gray-700"},"Due Date",-1)),c(e("input",{"onUpdate:modelValue":r[3]||(r[3]=d=>l.value=d),type:"date",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,l.value]])]),e("div",oe,[e("button",{onClick:r[4]||(r[4]=d=>w("close")),class:"rounded-md border border-gray-300 px-4 py-2 text-sm"}," Cancel "),e("button",{onClick:D,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700"}," Create PO ")])]))}}),le={class:"space-y-4"},ne={class:"flex justify-end gap-2"},de=F({__name:"SupplierPaymentForm",props:{supplierId:{}},emits:["close","saved"],setup($,{emit:P}){const C=$,w=P,s=A(),a=v(0),i=v(new Date().toISOString().split("T")[0]),x=v("");function b(){if(a.value<=0){alert("Please enter a valid amount");return}s.recordPayment({supplierId:C.supplierId,amount:a.value,paymentDate:i.value,notes:x.value||void 0}),a.value=0,i.value=new Date().toISOString().split("T")[0],x.value="",w("saved"),w("close")}return(g,l)=>(p(),m("div",le,[e("div",null,[l[4]||(l[4]=e("label",{class:"block text-sm text-gray-700"},[_("Amount "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":l[0]||(l[0]=y=>a.value=y),type:"number",min:"0.01",step:"0.01",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,a.value,void 0,{number:!0}]])]),e("div",null,[l[5]||(l[5]=e("label",{class:"block text-sm text-gray-700"},"Payment Date",-1)),c(e("input",{"onUpdate:modelValue":l[1]||(l[1]=y=>i.value=y),type:"date",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,i.value]])]),e("div",null,[l[6]||(l[6]=e("label",{class:"block text-sm text-gray-700"},"Notes",-1)),c(e("textarea",{"onUpdate:modelValue":l[2]||(l[2]=y=>x.value=y),rows:"2",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,x.value]])]),e("div",ne,[e("button",{onClick:l[3]||(l[3]=y=>w("close")),class:"rounded-md border border-gray-300 px-4 py-2 text-sm"}," Cancel "),e("button",{onClick:b,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700"}," Record Payment ")])]))}}),ie={class:"space-y-6"},ae={class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm"},ue={class:"mb-3 text-lg font-semibold text-gray-800"},pe={key:0,class:"mb-3 rounded-md bg-red-50 p-2 text-sm text-red-700"},me={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},ce=["value"],xe={class:"flex items-center gap-2"},ge={class:"mt-4 flex gap-2"},ye={class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm"},ve={class:"mb-4 flex items-center justify-between"},be={class:"text-lg font-semibold text-gray-800"},fe={class:"overflow-x-auto"},Pe={class:"w-full text-sm"},he={class:"divide-y divide-gray-200"},we={key:0,class:"text-center text-gray-500"},ke={class:"px-4 py-2"},Ce={class:"font-medium text-gray-900"},Se={key:0,class:"text-xs text-indigo-600"},Ne={class:"px-4 py-2 text-gray-700"},_e={class:"px-4 py-2 text-gray-700"},$e={class:"px-4 py-2 text-gray-600"},Te={class:"px-4 py-2 text-gray-600"},Ve={class:"px-4 py-2"},Ie={class:"flex justify-center gap-1"},De=["onClick"],Ue=["onClick"],Fe=["onClick"],Ae=["onClick"],Oe={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4"},je={class:"w-full max-w-2xl rounded-lg bg-white p-6 shadow-lg"},qe={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4"},Ee={class:"w-full max-w-md rounded-lg bg-white p-6 shadow-lg"},Me=F({__name:"SupplierAdmin",setup($){const P=A(),C=j(),w=["Net 15","Net 30","Net 45","Cash on Delivery","Prepaid"],s=q({supplierName:"",contactPerson:"",phone:"",email:"",address:"",paymentTerms:"Net 30",preferred:!1}),a=v(null),i=v(""),x=v(!1),b=v(!1),g=v(null),l=v(""),y=E(()=>{let n=P.suppliersForCurrentStore;const t=i.value.trim().toLowerCase();return t&&(n=n.filter(o=>o.supplierName.toLowerCase().includes(t)||o.contactPerson.toLowerCase().includes(t)||o.phone.includes(t)||o.email.toLowerCase().includes(t))),n.sort((o,N)=>o.supplierName.localeCompare(N.supplierName))});function S(){s.supplierName="",s.contactPerson="",s.phone="",s.email="",s.address="",s.paymentTerms="Net 30",s.preferred=!1,a.value=null,l.value=""}function I(){var n,t;if(!s.supplierName.trim()||!s.contactPerson.trim()||!s.phone.trim()||!s.email.trim()){l.value="Please fill in all required fields";return}try{a.value==null?P.addSupplier({supplierName:s.supplierName.trim(),contactPerson:s.contactPerson.trim(),phone:s.phone.trim(),email:s.email.trim(),address:((n=s.address)==null?void 0:n.trim())||void 0,paymentTerms:s.paymentTerms,preferred:s.preferred}):P.updateSupplier(a.value,{supplierName:s.supplierName.trim(),contactPerson:s.contactPerson.trim(),phone:s.phone.trim(),email:s.email.trim(),address:((t=s.address)==null?void 0:t.trim())||void 0,paymentTerms:s.paymentTerms,preferred:s.preferred}),S(),l.value=""}catch(o){l.value=o.message||"Failed to save supplier"}}function D(n){a.value=n.id,s.supplierName=n.supplierName,s.contactPerson=n.contactPerson,s.phone=n.phone,s.email=n.email,s.address=n.address||"",s.paymentTerms=n.paymentTerms,s.preferred=n.preferred,l.value=""}function h(n){confirm("Delete this supplier?")&&(P.removeSupplier(n),a.value===n&&S())}function r(n){g.value=n,x.value=!0}function d(n){g.value=n,b.value=!0}return M(()=>{P.load(),C.load()}),(n,t)=>(p(),m("div",ie,[e("div",ae,[e("h2",ue,u(a.value==null?"Add Supplier":"Edit Supplier"),1),l.value?(p(),m("div",pe,u(l.value),1)):k("",!0),e("div",me,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm text-gray-700"},[_("Supplier Name "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.supplierName=o),type:"text",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,s.supplierName]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm text-gray-700"},[_("Contact Person "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.contactPerson=o),type:"text",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,s.contactPerson]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm text-gray-700"},[_("Phone "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.phone=o),type:"tel",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,s.phone]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm text-gray-700"},[_("Email "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.email=o),type:"email",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,s.email]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm text-gray-700"},"Address",-1)),c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.address=o),type:"text",class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,s.address]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm text-gray-700"},"Payment Terms",-1)),c(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.paymentTerms=o),class:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},[(p(),m(T,null,V(w,o=>e("option",{key:o,value:o},u(o),9,ce)),64))],512),[[L,s.paymentTerms]])]),e("div",xe,[c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.preferred=o),type:"checkbox",id:"preferred",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[z,s.preferred]]),t[18]||(t[18]=e("label",{for:"preferred",class:"text-sm text-gray-700"},"Preferred Supplier",-1))])]),e("div",ge,[e("button",{onClick:I,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-700"},u(a.value==null?"Add Supplier":"Save Changes"),1),e("button",{onClick:S,class:"rounded-md border border-gray-300 px-4 py-2 text-sm"},"Clear")])]),e("div",ye,[e("div",ve,[e("h2",be,"Suppliers ("+u(y.value.length)+")",1),c(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>i.value=o),type:"text",placeholder:"Search suppliers...",class:"w-64 rounded-md border border-gray-300 px-3 py-1 text-sm outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"},null,512),[[f,i.value]])]),e("div",fe,[e("table",Pe,[t[20]||(t[20]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Name"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Contact"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Phone"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Email"),e("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-700"},"Payment Terms"),e("th",{class:"px-4 py-2 text-center text-xs font-medium text-gray-700"},"Actions")])],-1)),e("tbody",he,[y.value.length===0?(p(),m("tr",we,[...t[19]||(t[19]=[e("td",{colspan:"6",class:"px-4 py-8"},"No suppliers found",-1)])])):k("",!0),(p(!0),m(T,null,V(y.value,o=>(p(),m("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",ke,[e("div",Ce,u(o.supplierName),1),o.preferred?(p(),m("div",Se,"⭐ Preferred")):k("",!0)]),e("td",Ne,u(o.contactPerson),1),e("td",_e,u(o.phone),1),e("td",$e,u(o.email),1),e("td",Te,u(o.paymentTerms),1),e("td",Ve,[e("div",Ie,[e("button",{onClick:N=>D(o),class:"rounded-md border border-gray-300 px-2 py-1 text-xs hover:bg-gray-50"}," Edit ",8,De),e("button",{onClick:N=>r(o.id),class:"rounded-md border border-blue-300 bg-blue-50 px-2 py-1 text-xs text-blue-700 hover:bg-blue-100"}," PO ",8,Ue),e("button",{onClick:N=>d(o.id),class:"rounded-md border border-green-300 bg-green-50 px-2 py-1 text-xs text-green-700 hover:bg-green-100"}," Pay ",8,Fe),e("button",{onClick:N=>h(o.id),class:"rounded-md border border-red-300 bg-red-50 px-2 py-1 text-xs text-red-700 hover:bg-red-100"}," Del ",8,Ae)])])]))),128))])])])]),x.value?(p(),m("div",Oe,[e("div",je,[t[21]||(t[21]=e("h3",{class:"mb-4 text-lg font-semibold"},"Create Purchase Order",-1)),O(re,{"supplier-id":g.value,onClose:t[8]||(t[8]=o=>{x.value=!1,g.value=null}),onSaved:t[9]||(t[9]=o=>U(P).load())},null,8,["supplier-id"])])])):k("",!0),b.value?(p(),m("div",qe,[e("div",Ee,[t[22]||(t[22]=e("h3",{class:"mb-4 text-lg font-semibold"},"Record Payment",-1)),O(de,{"supplier-id":g.value,onClose:t[10]||(t[10]=o=>{b.value=!1,g.value=null}),onSaved:t[11]||(t[11]=o=>U(P).load())},null,8,["supplier-id"])])])):k("",!0)]))}});export{Me as default};
